<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Defenda AI</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="icon" type="image/jpg" href="{{ url_for('static', filename='local/logo.jpg') }}">
</head>
<body>
  <div class="container">
    <div class="glass-card">
      <img src="{{ url_for('static', filename='local/logo.jpg') }}" alt="Defenda AI Logo" class="logo">
      <h1>Defenda AI - Intelligent Excuse Generator</h1>
      <p class="subtitle">Get believable excuses for any situation</p>
      <form method="POST" id="excuseForm" action="{{ url_for('generate') }}">
        <label for="situation">Describe your situation:</label><br>
        <input type="text" id="situation" name="situation" value="{{ situation }}" 
               placeholder="e.g., late to school, missed deadline" required>
        
        <label for="num_excuses">Number of excuses (max 50):</label><br>
        <input type="number" id="num_excuses" name="num_excuses" 
               value="{{ num_excuses if num_excuses else 1 }}" min="1" max="50" required>
        
        <button type="submit">Generate Excuse</button>
      </form>
    </div>
    
    {% if result %}
      <div class="results-container">
        <div class="results-header">
          <h2>Generated Excuses:</h2>
        </div>
        <div class="output">
          {% if result|length > 1 %}
          <button class="copy-all-btn">
            <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect>
              <path d="m4 16c-1.1 0-2-.9-2-2v-10c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>
            </svg>
            Copy all excuses
          </button>
          {% endif %}
          {% for excuse in result %}
            <div class="excuse-item">
              <span class="excuse-number">{{ loop.index }}.</span>
              <span class="excuse-text">{{ excuse }}</span>
              <button class="copy-btn" data-text="{{ excuse }}" title="Copy this excuse">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect>
                  <path d="m4 16c-1.1 0-2-.9-2-2v-10c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>
                </svg>
              </button>
            </div>
          {% endfor %}
        </div>
        {% if result|length < num_excuses %}
        <p class="notice">We generated {{ result|length }} out of {{ num_excuses }} requested excuses.</p>
        {% endif %}
      </div>
    {% endif %}
  </div>
  
  <div class="copy-notification" id="copyNotification">Copied to clipboard!</div>
  
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>